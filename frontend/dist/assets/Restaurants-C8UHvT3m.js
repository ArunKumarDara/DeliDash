import{b as he,u as fe,j as e,r as m,d as xe,e as pe,f as ge,g as k,P as V,h as I,i as ve,k as W,m as Se,c as F,S as je,n as ye,o as Q,B as T,p as we,q as be,v as Ne,w as Ce}from"./index-Cp5ZQkWI.js";import{I as Pe}from"./input-B2l1gaGO.js";import{u as Re,S as ke,a as De,b as Ee,c as _e,d as M}from"./select-0XNEoz6N.js";import{C as Ae,a as Me,b as Ie,e as Te,c as Ve}from"./card-DSvsHL0T.js";import{B as Ke}from"./badge-H5lVBdtp.js";import{C as X}from"./checkbox-C_lQH9xq.js";import{u as Be}from"./useInfiniteQuery-kLJwW_1_.js";import{g as He}from"./restaurant-D-W4ao-Y.js";import{S as ze}from"./search-BEZ10FSU.js";/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],Le=he("SlidersHorizontal",Fe),Oe=({_id:t,name:n,address:s,phoneNumber:r,cuisineType:a,rating:l,avatar:o})=>{const d=fe();return e.jsxs(Ae,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-all",onClick:()=>d(`/restaurants/${t}`),children:[e.jsx("div",{className:"relative",children:e.jsx("img",{src:o,alt:n,className:"w-full h-[200px] object-cover"})},t),e.jsx(Me,{children:e.jsxs("div",{className:"flex justify-between items-start gap-5 w-full",children:[e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx(Ie,{className:"text-lg text-start",children:n}),e.jsx(Te,{className:"line-clamp-1 text-center",children:a})]}),e.jsxs(Ke,{variant:l[1]>=4?"default":"secondary",children:["⭐ ",l]})]})}),e.jsx(Ve,{children:e.jsxs("div",{className:"flex flex-col items-center gap-1 justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:s}),e.jsx("span",{className:"text-muted-foreground",children:`+91 ${r}`})]})})]},t)};var J=["PageUp","PageDown"],Z=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ee={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},D="Slider",[L,$e,Ue]=ge(D),[te,jt]=pe(D,[Ue]),[Ye,K]=te(D),ne=m.forwardRef((t,n)=>{const{name:s,min:r=0,max:a=100,step:l=1,orientation:o="horizontal",disabled:d=!1,minStepsBetweenThumbs:u=0,defaultValue:i=[r],value:x,onValueChange:c=()=>{},onValueCommit:h=()=>{},inverted:j=!1,form:w,...v}=t,S=m.useRef(new Set),f=m.useRef(0),g=o==="horizontal"?qe:Xe,[y=[],E]=xe({prop:x,defaultProp:i,onChange:b=>{var P;(P=[...S.current][f.current])==null||P.focus(),c(b)}}),B=m.useRef(y);function H(b){const N=Ze(y,b);_(b,N)}function ue(b){_(b,f.current)}function me(){const b=B.current[f.current];y[f.current]!==b&&h(y)}function _(b,N,{commit:P}={commit:!1}){const Y=st(l),z=rt(Math.round((b-r)/l)*l+r,Y),A=W(z,[r,a]);E((R=[])=>{const C=Qe(R,A,N);if(nt(C,u*l)){f.current=C.indexOf(A);const q=String(C)!==String(R);return q&&P&&h(C),q?C:R}else return R})}return e.jsx(Ye,{scope:t.__scopeSlider,name:s,disabled:d,min:r,max:a,valueIndexToChangeRef:f,thumbs:S.current,values:y,orientation:o,form:w,children:e.jsx(L.Provider,{scope:t.__scopeSlider,children:e.jsx(L.Slot,{scope:t.__scopeSlider,children:e.jsx(g,{"aria-disabled":d,"data-disabled":d?"":void 0,...v,ref:n,onPointerDown:k(v.onPointerDown,()=>{d||(B.current=y)}),min:r,max:a,inverted:j,onSlideStart:d?void 0:H,onSlideMove:d?void 0:ue,onSlideEnd:d?void 0:me,onHomeKeyDown:()=>!d&&_(r,0,{commit:!0}),onEndKeyDown:()=>!d&&_(a,y.length-1,{commit:!0}),onStepKeyDown:({event:b,direction:N})=>{if(!d){const z=J.includes(b.key)||b.shiftKey&&Z.includes(b.key)?10:1,A=f.current,R=y[A],C=l*z*N;_(R+C,A,{commit:!0})}}})})})})});ne.displayName=D;var[se,re]=te(D,{startEdge:"left",endEdge:"right",size:"width",direction:1}),qe=m.forwardRef((t,n)=>{const{min:s,max:r,dir:a,inverted:l,onSlideStart:o,onSlideMove:d,onSlideEnd:u,onStepKeyDown:i,...x}=t,[c,h]=m.useState(null),j=I(n,g=>h(g)),w=m.useRef(void 0),v=ve(a),S=v==="ltr",f=S&&!l||!S&&l;function p(g){const y=w.current||c.getBoundingClientRect(),E=[0,y.width],H=U(E,f?[s,r]:[r,s]);return w.current=y,H(g-y.left)}return e.jsx(se,{scope:t.__scopeSlider,startEdge:f?"left":"right",endEdge:f?"right":"left",direction:f?1:-1,size:"width",children:e.jsx(ae,{dir:v,"data-orientation":"horizontal",...x,ref:j,style:{...x.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:g=>{const y=p(g.clientX);o==null||o(y)},onSlideMove:g=>{const y=p(g.clientX);d==null||d(y)},onSlideEnd:()=>{w.current=void 0,u==null||u()},onStepKeyDown:g=>{const E=ee[f?"from-left":"from-right"].includes(g.key);i==null||i({event:g,direction:E?-1:1})}})})}),Xe=m.forwardRef((t,n)=>{const{min:s,max:r,inverted:a,onSlideStart:l,onSlideMove:o,onSlideEnd:d,onStepKeyDown:u,...i}=t,x=m.useRef(null),c=I(n,x),h=m.useRef(void 0),j=!a;function w(v){const S=h.current||x.current.getBoundingClientRect(),f=[0,S.height],g=U(f,j?[r,s]:[s,r]);return h.current=S,g(v-S.top)}return e.jsx(se,{scope:t.__scopeSlider,startEdge:j?"bottom":"top",endEdge:j?"top":"bottom",size:"height",direction:j?1:-1,children:e.jsx(ae,{"data-orientation":"vertical",...i,ref:c,style:{...i.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:v=>{const S=w(v.clientY);l==null||l(S)},onSlideMove:v=>{const S=w(v.clientY);o==null||o(S)},onSlideEnd:()=>{h.current=void 0,d==null||d()},onStepKeyDown:v=>{const f=ee[j?"from-bottom":"from-top"].includes(v.key);u==null||u({event:v,direction:f?-1:1})}})})}),ae=m.forwardRef((t,n)=>{const{__scopeSlider:s,onSlideStart:r,onSlideMove:a,onSlideEnd:l,onHomeKeyDown:o,onEndKeyDown:d,onStepKeyDown:u,...i}=t,x=K(D,s);return e.jsx(V.span,{...i,ref:n,onKeyDown:k(t.onKeyDown,c=>{c.key==="Home"?(o(c),c.preventDefault()):c.key==="End"?(d(c),c.preventDefault()):J.concat(Z).includes(c.key)&&(u(c),c.preventDefault())}),onPointerDown:k(t.onPointerDown,c=>{const h=c.target;h.setPointerCapture(c.pointerId),c.preventDefault(),x.thumbs.has(h)?h.focus():r(c)}),onPointerMove:k(t.onPointerMove,c=>{c.target.hasPointerCapture(c.pointerId)&&a(c)}),onPointerUp:k(t.onPointerUp,c=>{const h=c.target;h.hasPointerCapture(c.pointerId)&&(h.releasePointerCapture(c.pointerId),l(c))})})}),oe="SliderTrack",ie=m.forwardRef((t,n)=>{const{__scopeSlider:s,...r}=t,a=K(oe,s);return e.jsx(V.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...r,ref:n})});ie.displayName=oe;var O="SliderRange",le=m.forwardRef((t,n)=>{const{__scopeSlider:s,...r}=t,a=K(O,s),l=re(O,s),o=m.useRef(null),d=I(n,o),u=a.values.length,i=a.values.map(h=>de(h,a.min,a.max)),x=u>1?Math.min(...i):0,c=100-Math.max(...i);return e.jsx(V.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...r,ref:d,style:{...t.style,[l.startEdge]:x+"%",[l.endEdge]:c+"%"}})});le.displayName=O;var $="SliderThumb",ce=m.forwardRef((t,n)=>{const s=$e(t.__scopeSlider),[r,a]=m.useState(null),l=I(n,d=>a(d)),o=m.useMemo(()=>r?s().findIndex(d=>d.ref.current===r):-1,[s,r]);return e.jsx(Ge,{...t,ref:l,index:o})}),Ge=m.forwardRef((t,n)=>{const{__scopeSlider:s,index:r,name:a,...l}=t,o=K($,s),d=re($,s),[u,i]=m.useState(null),x=I(n,p=>i(p)),c=u?o.form||!!u.closest("form"):!0,h=Se(u),j=o.values[r],w=j===void 0?0:de(j,o.min,o.max),v=Je(r,o.values.length),S=h==null?void 0:h[d.size],f=S?et(S,w,d.direction):0;return m.useEffect(()=>{if(u)return o.thumbs.add(u),()=>{o.thumbs.delete(u)}},[u,o.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[d.startEdge]:`calc(${w}% + ${f}px)`},children:[e.jsx(L.ItemSlot,{scope:t.__scopeSlider,children:e.jsx(V.span,{role:"slider","aria-label":t["aria-label"]||v,"aria-valuemin":o.min,"aria-valuenow":j,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...l,ref:x,style:j===void 0?{display:"none"}:t.style,onFocus:k(t.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),c&&e.jsx(We,{name:a??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:j},r)]})});ce.displayName=$;var We=t=>{const{value:n,...s}=t,r=m.useRef(null),a=Re(n);return m.useEffect(()=>{const l=r.current,o=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(o,"value").set;if(a!==n&&u){const i=new Event("input",{bubbles:!0});u.call(l,n),l.dispatchEvent(i)}},[a,n]),e.jsx("input",{style:{display:"none"},...s,ref:r,defaultValue:n})};function Qe(t=[],n,s){const r=[...t];return r[s]=n,r.sort((a,l)=>a-l)}function de(t,n,s){const l=100/(s-n)*(t-n);return W(l,[0,100])}function Je(t,n){return n>2?`Value ${t+1} of ${n}`:n===2?["Minimum","Maximum"][t]:void 0}function Ze(t,n){if(t.length===1)return 0;const s=t.map(a=>Math.abs(a-n)),r=Math.min(...s);return s.indexOf(r)}function et(t,n,s){const r=t/2,l=U([0,50],[0,r]);return(r-l(n)*s)*s}function tt(t){return t.slice(0,-1).map((n,s)=>t[s+1]-n)}function nt(t,n){if(n>0){const s=tt(t);return Math.min(...s)>=n}return!0}function U(t,n){return s=>{if(t[0]===t[1]||n[0]===n[1])return n[0];const r=(n[1]-n[0])/(t[1]-t[0]);return n[0]+r*(s-t[0])}}function st(t){return(String(t).split(".")[1]||"").length}function rt(t,n){const s=Math.pow(10,n);return Math.round(t*s)/s}var at=ne,ot=ie,it=le,lt=ce;function ct({className:t,defaultValue:n,value:s,min:r=0,max:a=100,...l}){const o=m.useMemo(()=>Array.isArray(s)?s:Array.isArray(n)?n:[r,a],[s,n,r,a]);return e.jsxs(at,{"data-slot":"slider",defaultValue:n,value:s,min:r,max:a,className:F("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",t),...l,children:[e.jsx(ot,{"data-slot":"slider-track",className:F("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:e.jsx(it,{"data-slot":"slider-range",className:F("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:o.length},(d,u)=>e.jsx(lt,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},u))]})}function G({priceRange:t,setPriceRange:n,selectedCuisines:s,setSelectedCuisines:r,selectedRatings:a,setSelectedRatings:l,isSheet:o}){const d=i=>{const x=s.includes(i)?s.filter(c=>c!==i):[...s,i];r(x)},u=i=>{const x=a.includes(i)?a.filter(c=>c!==i):[...a,i];l(x)};return e.jsxs("div",{className:"space-y-6 p-6",children:[o&&e.jsx(je,{children:e.jsx(ye,{children:"Filters"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:"Cuisines"}),e.jsx(Q,{className:"h-[100px]",children:e.jsx("div",{className:"space-y-3",children:dt.map(i=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{id:i,checked:s.includes(i),onCheckedChange:()=>d(i)}),e.jsx("label",{htmlFor:i,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:i})]},i))})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:"Price Range"}),e.jsx(ct,{defaultValue:[0,1e3],max:1e3,step:50,value:t,onValueChange:n}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{children:["₹",t[0]]}),e.jsxs("span",{children:["₹",t[1]]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:"Rating"}),e.jsx("div",{className:"space-y-3",children:[4.5,4,3.5,3].map(i=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{id:`rating-${i}`,checked:a.includes(i),onCheckedChange:()=>u(i)}),e.jsxs("label",{htmlFor:`rating-${i}`,className:"text-sm font-medium leading-none",children:[i,"+ ⭐"]})]},i))})]})]})}const dt=["Indian","Chinese","Fast Food","Other"];function yt(){var f;const[t,n]=m.useState([0,1e3]),[s,r]=m.useState(""),[a,l]=m.useState([]),[o,d]=m.useState([]),{data:u,isLoading:i,isFetchingNextPage:x,hasNextPage:c,fetchNextPage:h}=Be({queryKey:["restaurants",s,a,o,t],queryFn:({pageParam:p})=>He({pageParam:p,searchTerm:s,cuisines:a,ratings:o,priceRange:t}),initialPageParam:1,getNextPageParam:(p,g)=>p.totalPages>g.length?g.length+1:void 0,staleTime:1e3*60*5}),j=p=>{r(p.target.value)},w=p=>{l(p)},v=p=>{d(p)},S=(f=u==null?void 0:u.pages)==null?void 0:f.every(p=>p.data.length===0);return e.jsxs("div",{className:"container mx-auto py-6 max-w-6xl",children:[e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Restaurants"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Discover restaurants in your area"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex w-full md:w-[300px]",children:[e.jsx(Pe,{placeholder:"Search restaurants...",className:"rounded-r-none",value:s,onChange:j}),e.jsx(T,{variant:"secondary",className:"rounded-l-none",children:e.jsx(ze,{className:"h-4 w-4"})})]}),e.jsxs(we,{children:[e.jsx(be,{asChild:!0,children:e.jsxs(T,{variant:"outline",children:[e.jsx(Le,{className:"mr-2 h-4 w-4"}),"Filters"]})}),e.jsx(Ne,{children:e.jsx(G,{priceRange:t,setPriceRange:n,selectedCuisines:a,setSelectedCuisines:w,selectedRatings:o,setSelectedRatings:v})})]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:"hidden md:block w-[240px] flex-shrink-0",children:e.jsx(G,{priceRange:t,setPriceRange:n,selectedCuisines:a,setSelectedCuisines:w,selectedRatings:o,setSelectedRatings:v})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsxs(ke,{defaultValue:"recommended",children:[e.jsx(De,{className:"w-[180px]",children:e.jsx(Ee,{placeholder:"Sort by"})}),e.jsxs(_e,{children:[e.jsx(M,{value:"recommended",children:"Recommended"}),e.jsx(M,{value:"rating",children:"Rating"}),e.jsx(M,{value:"delivery-time",children:"Delivery Time"}),e.jsx(M,{value:"price-low",children:"Price: Low to High"}),e.jsx(M,{value:"price-high",children:"Price: High to Low"})]})]})}),e.jsxs(Q,{className:"h-screen",children:[S&&!i&&e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[300px] space-y-4 lg:w-3xl md:w-2xs w-dvw p-4 md:p-0",children:[e.jsx("div",{className:"text-6xl",children:"🍽️"}),e.jsx("h3",{className:"text-xl font-semibold",children:"No Restaurants Available"}),e.jsx("p",{className:"text-muted-foreground text-center max-w-md",children:"Sorry, currently there are no restaurants available. Please check back later or contact the restaurant for more information."}),e.jsx(T,{variant:"outline",onClick:()=>window.location.reload(),className:"mt-4",children:"Refresh Menu"})]}),i?e.jsx("div",{className:"lg:w-3xl md:w-2xs w-dvw flex justify-center items-center p-4 md:p-0",children:e.jsx(Ce,{})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 lg:w-3xl md:w-2xs w-dvw p-4 md:p-0",children:u==null?void 0:u.pages.map(p=>p.data.map(g=>e.jsx(Oe,{...g},g._id)))}),c&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx(T,{variant:"outline",onClick:()=>h(),disabled:x,children:x?"Loading...":"Load More"})})]})]})]})]})}export{yt as default};
