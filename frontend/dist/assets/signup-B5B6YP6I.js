import{r as F,u as I,a as S,j as e,c as L,B as k,L as C,s as E,t as j,C as M}from"./index-B1oV26O_.js";import{I as x}from"./input-CD-JPfev.js";import{u as T,F as U,a as t,b as l,L as i,c,d as o,s as O,z as n}from"./form-By8UDPlK.js";import{I as R,a as g,b as r,c as A}from"./input-otp-DVjQQptp.js";const z=n.object({userName:n.string().min(3,{message:"Username must be at least 3 characters"}),phoneNumber:n.string().regex(/^\d{10}$/,{message:"Phone number must be 10 digits"}),mPin:n.string().length(6,{message:"MPIN must be exactly 6 digits"}).regex(/^\d+$/,{message:"MPIN must be numeric"}),avatar:n.instanceof(File).optional()});function B({className:p,...f}){const[u,N]=F.useState(null),b=I(),a=T({resolver:O(z),defaultValues:{userName:"",phoneNumber:"",mPin:""}}),{mutate:v,isPending:y}=S({mutationFn:E,onSuccess:s=>{j("Signup successful! ðŸŽ‰"),b("/login"),console.log("User signed up:",s)},onError:s=>{j(s.message)}}),w=s=>{v(s)},P=s=>{var h;const m=(h=s.target.files)==null?void 0:h[0];if(m){a.setValue("avatar",m);const d=new FileReader;d.onloadend=()=>{N(d.result)},d.readAsDataURL(m)}};return e.jsx(U,{...a,children:e.jsxs("form",{className:L("flex flex-col gap-6",p),...f,onSubmit:a.handleSubmit(w),encType:"multipart/form-data",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Register your account"}),e.jsx("p",{className:"text-muted-foreground text-sm text-balance",children:"Enter your name & phone number below to register your account"})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsx(t,{control:a.control,name:"userName",render:({field:s})=>e.jsxs(l,{children:[e.jsx(i,{htmlFor:"userName",children:"Name"}),e.jsx(c,{children:e.jsx(x,{id:"userName",type:"text",placeholder:"Arun Kumar",...s})}),e.jsx(o,{})]})}),e.jsx(t,{control:a.control,name:"phoneNumber",render:({field:s})=>e.jsxs(l,{children:[e.jsx(i,{htmlFor:"phoneNumber",children:"Phone Number"}),e.jsx(c,{children:e.jsx(x,{id:"phoneNumber",type:"text",placeholder:"1234567890",...s})}),e.jsx(o,{})]})}),e.jsx(t,{control:a.control,name:"avatar",render:()=>e.jsxs(l,{children:[e.jsx(i,{htmlFor:"avatar",children:"Profile Picture"}),e.jsx(c,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[u?e.jsx("img",{src:u,alt:"Preview",className:"w-16 h-16 rounded-full object-cover"}):e.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-200 flex items-center justify-center",children:e.jsx("span",{className:"text-gray-500",children:"No image"})}),e.jsx(x,{id:"avatar",type:"file",accept:"image/*",onChange:P,className:"cursor-pointer"})]})}),e.jsx(o,{})]})}),e.jsx(t,{control:a.control,name:"mPin",render:({field:s})=>e.jsxs(l,{children:[e.jsx(i,{htmlFor:"password",children:"M-PIN"}),e.jsx(c,{children:e.jsxs(R,{maxLength:6,...s,children:[e.jsxs(g,{children:[e.jsx(r,{index:0}),e.jsx(r,{index:1}),e.jsx(r,{index:2})]}),e.jsx(A,{}),e.jsxs(g,{children:[e.jsx(r,{index:3}),e.jsx(r,{index:4}),e.jsx(r,{index:5})]})]})}),e.jsx(o,{})]})}),e.jsx(k,{type:"submit",className:"w-full",children:y?e.jsxs("span",{className:"flex gap-1 items-center",children:[e.jsx("span",{className:"dot w-2 h-2 bg-white rounded-full animate-bounce [animation-delay:-0.2s]"}),e.jsx("span",{className:"dot w-2 h-2 bg-white rounded-full animate-bounce [animation-delay:-0.1s]"}),e.jsx("span",{className:"dot w-2 h-2 bg-white rounded-full animate-bounce"})]}):"Sign Up"})]}),e.jsxs("div",{className:"text-center text-sm",children:["Already have an account?",e.jsx(C,{to:"/login",className:"ml-1 underline text-blue-600 hover:text-blue-800",children:"Login"})]})]})})}function K(){return e.jsxs("div",{className:"grid min-h-svh lg:grid-cols-2",children:[e.jsxs("div",{className:"flex flex-col gap-4 p-6 md:p-10",children:[e.jsx("div",{className:"flex justify-center gap-2 md:justify-start",children:e.jsxs("a",{className:"flex items-center gap-2 font-medium",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-md bg-primary text-primary-foreground",children:e.jsx(M,{className:"size-4"})}),"DineExpress."]})}),e.jsx("div",{className:"flex flex-1 items-center justify-center",children:e.jsx("div",{className:"w-full max-w-xs",children:e.jsx(B,{})})})]}),e.jsx("div",{className:"relative hidden bg-muted lg:block",children:e.jsx("img",{src:"https://res.cloudinary.com/dkhc0e1fc/image/upload/v1743433156/10626330_twgexf.jpg",alt:"Image",className:"absolute inset-0 h-full w-full object-cover dark:brightness-[0.2] dark:grayscale"})})]})}export{K as default};
